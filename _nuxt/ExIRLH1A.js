import{_ as R}from"./33j83r8e.js";import{_ as w,q as A,o as g,p as L,w as k,a as l,t as f,c as _,F as S,r as B,s as b}from"./CMjxq6oo.js";const F={class:"flex mt-[12px] flex-wrap gap-[6px]"},o="!@#$%^&*()_+-=[]{}|;:<>?/\\~`01アイウエオカキクケコサシスセソタチツテト",P={__name:"PreviewBlog",props:{title:String,date:String,description:String,slug:String,categories:Array},setup(i){const y=i,x=b(null),M=b([]),T=(n,t)=>{n&&(M.value[t]=n)};class q{constructor(t,e){this.el=t,this.originalText=e,this.isAnimating=!1,this.frame=0,this.queue=[],this.frameRequest=null}scramble(){const t=this.originalText.length;let e="";for(let s=0;s<t;s++)this.originalText[s]===" "?e+=" ":e+=o[Math.floor(Math.random()*o.length)];this.el.innerText=e,this.el.classList.add("decrypting")}decrypt(t=0){return new Promise(e=>{setTimeout(()=>{this.isAnimating&&this.stop(),this.isAnimating=!0;const s=this.originalText,r=s.length;this.queue=[];for(let a=0;a<r;a++){const h=o[Math.floor(Math.random()*o.length)],u=s[a],m=Math.floor(Math.random()*20),d=m+Math.floor(Math.random()*20)+10;this.queue.push({from:h,to:u,start:m,end:d})}this.frame=0,this.update(e)},t)})}update(t){let e="",s=0;for(let r=0;r<this.queue.length;r++){let{from:a,to:h,start:u,end:m}=this.queue[r];if(h===" "){e+=" ",s++;continue}if(this.frame>=m)s++,e+=h;else if(this.frame>=u){const d=o[Math.floor(Math.random()*o.length)];e+=`<span class="scramble-char">${d}</span>`}else e+=a}this.el.innerHTML=e,s===this.queue.length?(this.el.classList.remove("decrypting"),this.el.classList.add("decrypted"),this.isAnimating=!1,setTimeout(()=>{this.el.classList.remove("decrypted")},500),t()):(this.frame++,this.frameRequest=requestAnimationFrame(()=>this.update(t)))}stop(){this.frameRequest&&cancelAnimationFrame(this.frameRequest),this.isAnimating=!1}reset(){this.stop(),this.el.innerText=this.originalText,this.el.classList.remove("decrypting","decrypted")}}let c=[],p=!1;A(()=>{c=[{scrambler:new q(x.value,y.title),delay:0,type:"title"}]});const v=async()=>{if(p||c.length===0)return;p=!0,c.forEach(({scrambler:t})=>{t.scramble()}),await new Promise(t=>setTimeout(t,100));const n=c.map(({scrambler:t,delay:e})=>t.decrypt(e));await Promise.all(n),p=!1};return(n,t)=>{const e=R;return g(),L(e,{to:`/post/${i.slug}`},{default:k(()=>[l("div",{ref:"cardRef",class:"bg-[rgba(15,15,15,0.8)] mt-[20px] py-[20px] px-[24px] rounded-[8px] border-[1px] post-card border-[#1a1a1a] hover:border-[rgba(0,255,102)] hover:bg-[rgba(22,22,22,0.9)] hover:translate-x-[4px] duration-200 cursor-pointer",onMouseenter:v},[l("p",{ref:"dateRef",class:"text-[12px] text-[#555555] mb-[8px] font-mono"},f(i.date),513),l("h3",{ref_key:"titleRef",ref:x,class:"text-[18px] text-[#e0e0e0] mb-[8px] font-inter post-card__title font-mono"},f(i.title),513),l("p",{ref:"excerptRef",class:"text-[#888888] font-inter text-[14px] font-mono"},f(i.description),513),l("div",F,[(g(!0),_(S,null,B(i.categories,(s,r)=>(g(),_("span",{key:s,ref_for:!0,ref:a=>T(a,r),class:"bg-[rgba(0,255,102,0.08)] py-[0.2rem] px-[0.5rem] rounded-[4px] flex text-[0.7rem] text-[#00cc52] font-mono"},f(s),1))),128))])],544)]),_:1},8,["to"])}}},C=w(P,[["__scopeId","data-v-a2a601ec"]]);export{C as _};
